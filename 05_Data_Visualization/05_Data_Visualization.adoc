= Data Visualization

* 데이터 분석에서 다루는 데이터의 종류는 매우 다양함
* 그래프를 이용하면 데이터의 구조와 패턴을 파악하기 유용함
* 다양한 관점엣거 데이터에 관한 insignt를 제공
* pandas에 포함된 시각화 도구만으로는 부족함

== Matplotlib

* python 표준 시각화 도구라고 부를 수 있을 정도로 많이 사용됨
* 2D 평면 그래프에 관한 다양한 포맷과 기능 지원
* 사용하기 쉬움

== Sample Data

[%header, cols="2,1,1,1,1,1,1,1,1", width=100%]
|===
|전입지     |1970	    |1971	    |1972	    |1973       |...	|2014	    |2016	    |2017
|전국	    |1448985	|1419016	|1210559	|1647268    |...	|1661425	|1655859	|1571423
|부산광역시	 |11568	    |11130	    |11768	    |16307      |...	|17320	|15062	|14484
|대구광역시	 |-	        |-	|-	|-	|...    |10062	|9623	|8891
|인천광역시	 |-         |-	|-	|-	|...    |43212	|43745	|40485
|광주광역시	 |-	        |-	|-	|-	|...    |9759	|8354	|7932
|대전광역시	 |-	        |-	|-	|-	|...    |13403	|12619	|11815
|울산광역시	 |-	        |-	|-	|-	|...    |6047	|5102	|4260
|세종특별자치시	|-	    |-	|-	|-	 |...   |6481	|5943	|5813
|경기도	    |130149	    |150313	|93333	|143234 |...	|332785	|370760	|342433
|강원도	    |9352	    |12885	|13561	|16481	|...	|21173	|21590	|21016
|충청북도	|6700	    |9457	|10853	|12617	|...	|14244	|14087	|13302
|충청남도	|15954	    |18943	|23406	|27139	|...	|21473	|21741	|21020
|전라북도	|10814	    |13192	|16583	|18642	|...	|14566	|13835	|13179
|전라남도	|10513	    |16755	|20157	|22160	|...	|14591	|13065	|12426
|경상북도	|11868	    |16459	|22073	|27531	|...	|14456	|14236	|12464
|경상남도	|8409	    |10001	|11263	|15193	|...	|14799	|13717	|12692
|제주특별자치도	|1039	|1325	|1617	|2456	|...	|9031	|10465	|10404
|===

== 선 그래프

[source, python]
----
sr_one = df_seoul.loc['경기도']
plt.plot(sr_one.index, sr_one.values)
----
+
image:./images/image01.png[]

=== 차트 제목, 축 이름 추가

* 차트 제목에는 title() 함수 사용
* x, y 축 제목을 위해 xlabel(), ylabel() 함수를 사용

[source, python]
----
plt.plot(sr_one.index, sr_one.values)
plt.plot(sr_one)
plt.title('경기도 -> 서울 이동 인구')
plt.xlabel('기간')
plt.ylabel('이동 인구수')
plt.show()
----

=== 그래프 설정

* 그래프 크기 설정 +
_plt.figure(figsize=(horizontal_inch, vertical_inch))_
* 눈금 라벨 회전 +
_plt.xticks(rotation='vertical')_

image:./images/image02.png[]

[source, python]
----
plt.figure(figsize=(14, 5))
plt.xticks(rotation='vertical')
plt.plot(sr_one)
plt.title('경기도 -> 서울 이동 인구')
plt.xlabel('기간')
plt.ylabel('이동 인구수')
plt.show()
----

image:./images/image03.png[]

=== 스타일 적용

* 색, 폰트 등 디자인 요소를 사전에 지정된 스타일로 일괄 변경
* Matplotlib 실행 환경을 변경하므로, 설정 후 모든 그래프에 적용
* 기본 값은 'default'
+
_plt.style.use('style_name')_

image:./images/image04.png[]

> 참고 https://matplotlib.org/stable/users/prev_whats_new/dflt_style_changes.html

=== 화면 분할, 여러개 그래프 작성

* axe 객체를 사용하여 분할된 화면마다 axe 객체를 하나씩 배정
* axe 객체는 각각 서로 다른 그래프를 표현할 수 있음
+
[source, python]
----
# 그래프 객체 생성(figure에 2개의 서브 플롯 생성)
fig = plt.figure(figsize=(10, 10))
# add_subplot(row 크기, column 크기, 서브 플롯 순서)
ax1 = fig.add_subplot(2, 1, 1)
ax2 = fig.add_subplot(2, 1, 2)

# axe 객체에 plot 함수로 그래프 출력
ax1.plot(sr_one, marker='o', markersize=10, linewidth=0)
ax2.plot(sr_one, marker='+', markerfacecolor='green',markersize=10, color='olive', linewidth=2, label='서울->경기')
ax2.legend(loc='best')

# y축 범위 지정
ax1.set_ylim(50000, 800000)
ax2.set_ylim(50000, 800000)

# 축 눈금 라벨 지정 및 75도 회전
ax1.set_xticklabels(sr_one.index, rotation=75)
ax2.set_xticklabels(sr_one.index, rotation=75)

plt.show()
----

image:./images/image05.png[]

=== 여러 그래프

